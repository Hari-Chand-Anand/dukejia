<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Products in Demand - Duke Jia</title>
  <meta name="theme-color" content="#FAF9F6" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    :root{--pur:#045285;--pur2:#833ade;--primary:var(--pur);--accent:var(--pur2);--brand-2:#a88bff;--bg:#FAF9F6;--text:#2D3436;--muted:#5f6970;--muted2:#6f7a82;--lgray:#E8EDF2}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    
    @media (max-width:1024px){.container{padding:0 24px}}
    @media (max-width:480px){.container{padding:0 16px}}

    .site-header{position:sticky;top:0;z-index:50;background:rgba(250,249,246,.85);backdrop-filter:blur(10px);border-bottom:1px solid var(--lgray)}
    .container.nav{display:flex;justify-content:space-between;align-items:center;height:72px}
    .nav-center{display:flex;gap:28px;align-items:center}
    .nav-center a{color:var(--text);font-weight:600}
    .nav-center a:hover{color:var(--accent)}
    .btn-quote{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:999px;font-weight:700;background:linear-gradient(90deg,var(--accent),var(--brand-2));color:#fff}
    .menu-toggle{display:none;background:none;border:none;color:var(--pur);font-size:1.5rem;cursor:pointer;padding:8px;border-radius:6px}
    @media (max-width:780px){
      .nav-center{position:fixed;top:72px;left:0;right:0;background:rgba(250,249,246,.98);backdrop-filter:blur(10px);
        flex-direction:column;padding:20px 24px;gap:0;transform:translateY(-100%);opacity:0;visibility:hidden;transition:.3s;border-bottom:1px solid var(--lgray)}
      .nav-center.open{transform:translateY(0);opacity:1;visibility:visible}
      .nav-center a{padding:16px 0;width:100%;border-bottom:1px solid #eee}
      .nav-center a:last-child{border-bottom:none}
      .menu-toggle{display:block}
      .btn-quote{width:100%;justify-content:center}
    }

    .hero{position:relative;background:var(--bg);
      background-image:radial-gradient(1100px 520px at 80% -10%, rgba(168,139,255,.18), transparent 60%),
                       radial-gradient(900px 450px at -10% 90%, rgba(4,82,133,.12), transparent 60%);
      background-attachment:fixed;padding:48px 0 18px}
    .headline{font-size:clamp(2.2rem,5vw,3.6rem);line-height:1.05;margin:0 0 .6rem;font-weight:900;color:var(--pur)}
    .headline .accent{color:transparent;background:linear-gradient(90deg,var(--primary),var(--accent));-webkit-background-clip:text;background-clip:text}
    .sub{font-size:clamp(1.05rem,1.7vw,1.2rem);line-height:1.8;color:#4a5258;max-width:100ch;margin:0}

    section{padding:24px 0 72px}

    .controls{display:flex;gap:1rem;align-items:center;flex-wrap:wrap;margin-top:18px}
    .search-box{position:relative;flex:1;min-width:260px;max-width:520px}
    .search-box input{width:100%;padding:12px 16px 12px 44px;border-radius:12px;border:1px solid var(--lgray);background:#fff;color:var(--text);font-size:16px}
    .search-box i{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:#9aa2a9}
    .chips{display:flex;gap:.6rem;flex-wrap:wrap}
    .chip{padding:10px 18px;border-radius:999px;border:1px solid var(--lgray);background:#fff;color:#6b7280;font-weight:700;cursor:pointer}
    .chip.active,.chip:hover{background:var(--primary);color:#fff;border-color:var(--primary)}
    .view{display:flex;gap:.5rem}
    .view-btn{width:40px;height:40px;border-radius:8px;border:1px solid var(--lgray);background:#fff;color:#6b7280;display:flex;align-items:center;justify-content:center;cursor:pointer}
    .view-btn.active,.view-btn:hover{background:var(--primary);color:#fff;border-color:var(--primary)}

    .videos-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.6rem;margin-top:1.2rem}
    .videos-grid.compact{grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}
    .videos-grid.list{grid-template-columns:1fr}
    .video-card{background:#fff;border:1px solid var(--lgray);border-radius:16px;overflow:hidden;transition:all .35s cubic-bezier(.2,.8,.2,1);
      position:relative;display:flex;flex-direction:column;height:100%;box-shadow:0 8px 24px rgba(0,0,0,.06);opacity:0;transform:translateY(18px);animation:fadeInUp .5s forwards}
    @keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}
    .video-card:hover{transform:translateY(-6px) scale(1.01);box-shadow:0 18px 38px rgba(4,82,133,.12);border-color:rgba(4,82,133,.25)}
    .video-card.list-layout{flex-direction:row}
    .video-thumbnail{position:relative;height:200px;background:#f3f6fb;flex-shrink:0;cursor:pointer}
    .video-card.list-layout .video-thumbnail{width:240px;height:160px}
    .video-thumbnail img{width:100%;height:100%;object-fit:cover}
    .popularity-badge{position:absolute;top:12px;right:12px;background:linear-gradient(90deg,var(--primary),var(--accent));color:#fff;padding:6px 10px;border-radius:20px;font-size:.8rem;font-weight:800}
    .video-info{padding:1rem 1.1rem 1.2rem;display:flex;flex-direction:column;gap:.5rem}
    .video-title{font-size:1.08rem;font-weight:900;line-height:1.25;cursor:pointer}
    .video-description{color:var(--muted2);font-size:.95rem;line-height:1.5}
    .video-stats{display:flex;justify-content:space-between;align-items:center;color:#6b7280;font-size:.92rem;margin-top:auto}
    .video-actions{display:flex;gap:.5rem}
    .video-action-btn{background:#fff;border:1px solid var(--lgray);border-radius:8px;width:36px;height:36px;display:grid;place-items:center;cursor:pointer}

    /* Modal (drawer) */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;opacity:0;z-index:1000}
    .modal.active{display:block;opacity:1}
    .drawer{
      position:absolute;right:0;top:0;bottom:0;width:min(780px,100%);background:#fff;border-left:1px solid var(--lgray);
      transform:translateX(100%);transition:transform .28s ease;display:flex;flex-direction:column;height:100%; /* key for internal sizing */
      overflow:hidden; /* prevent page scroll behind */
    }
    .modal.active .drawer{transform:translateX(0)}
    .drawer-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid var(--lgray);flex:0 0 auto;background:#fff}
    .drawer-header h3{margin:0;font-size:1.15rem;font-weight:900}
    .close-btn{background:none;border:1px solid var(--lgray);width:36px;height:36px;border-radius:8px;cursor:pointer;color:#6b7280}

    /* Top part (image + meta) can scroll if it gets tall */
    .drawer-body{
      display:grid;grid-template-columns:280px 1fr;gap:16px;padding:16px;overflow:auto;flex:0 0 auto;max-height:45vh;background:#fff;
    }
    .drawer-img{border:1px solid var(--lgray);border-radius:12px;overflow:hidden;background:#f6f8fb}
    .drawer-img img{width:100%;height:100%;object-fit:cover}
    @media (max-width:760px){
      .drawer-body{grid-template-columns:1fr;max-height:55vh}
    }
    .meta{display:grid;grid-template-columns:1fr;gap:8px}
    .muted{color:#6b7280}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--lgray);border-radius:999px;font-weight:700;color:#425f85;background:#f1f5fb}
    .cta-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid var(--lgray);cursor:pointer;background:#fff}
    .btn-primary{background:linear-gradient(90deg,var(--primary),var(--accent));border:none;color:#fff}

    /* Tabs stay on top of the scrollable content */
    .tabs{display:flex;gap:8px;padding:8px 16px;border-top:1px solid var(--lgray);border-bottom:1px solid var(--lgray);background:#fff;flex:0 0 auto;position:sticky;top:0;z-index:1}
    .tab{padding:10px 14px;border-radius:10px;border:1px solid var(--lgray);background:#fff;color:#6b7280;font-weight:700;cursor:pointer}
    .tab.active{background:var(--primary);border-color:var(--primary);color:#fff}

    /* Scroll only inside the tab content area */
    .tabpanes{padding:8px 16px 18px;flex:1 1 auto;min-height:0;overflow:auto;background:#fff}
    .pane{display:none}
    .pane.active{display:block}
    /* SPECIFICALLY make Specs scroll-friendly */
    #pane-specs{overflow:auto}
    .spec-table{width:100%;border-collapse:collapse;table-layout:fixed}
    .spec-table td{padding:8px 10px;border-bottom:1px dashed #e5e7eb;vertical-align:top;word-break:break-word}
    .spec-left{width:42%;color:#425f85;font-weight:700}
    .feature-list{margin:8px 0 0 18px}
  </style>
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="index.html" aria-label="Duke Jia Home">
        <span><img src="images/dukejia.png" width="190" height="55" alt="DUKEJIA"></span>
      </a>

      <button class="menu-toggle" aria-label="Toggle navigation"><i class="fas fa-bars"></i></button>

      <nav class="nav-center" aria-label="Primary">
        <a href="index.html">Home</a>
        <a href="Products-Details.html" style="color:var(--accent);font-weight:700;">Products</a>
        <a href="Contact.html">Contact</a>
        <a class="btn-quote"
           href="https://wa.me/919350513789?text=Hi%20Duke%20Jia%20Team%2C%20I%27m%20interested%20in%20your%20machines.%20Please%20share%20pricing%20%26%20availability."
           target="_blank" rel="noopener">
          <i class="fa-solid fa-phone"></i> Get Quote</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container hero-inner">
      <h1 class="headline">Products in <span class="accent">Demand</span></h1>
      <p class="sub">Search, filter by category, switch layout, and click a product to see full details.</p>

      <div class="controls">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" id="videoSearch" placeholder="Search brand, model, features..." />
        </div>

        <div class="chips">
          <button class="chip active filter-btn" data-filter="all">All</button>
          <button class="chip filter-btn" data-filter="flagship">Flagship</button>
          <button class="chip filter-btn" data-filter="embroidery">Embroidery</button>
          <button class="chip filter-btn" data-filter="perforation">Perforation</button>
          <button class="chip filter-btn" data-filter="quilting">Quilting</button>
        </div>

        <div class="view">
          <button class="view-btn active" data-view="grid" title="Grid"><i class="fas fa-th"></i></button>
          <button class="view-btn" data-view="compact" title="Compact grid"><i class="fas fa-th-large"></i></button>
          <button class="view-btn" data-view="list" title="List"><i class="fas fa-list"></i></button>
        </div>
      </div>
    </div>
  </section>

  <!-- Products in Demand -->
  <section id="products-on-demand">
    <div class="container">
      <div class="videos-grid" id="video-gallery"></div>
    </div>
  </section>

  <!-- Product Details Modal -->
  <div class="modal" id="productModal" aria-hidden="true">
    <div class="drawer" role="dialog" aria-modal="true" aria-labelledby="pdTitle">
      <div class="drawer-header">
        <h3 id="pdTitle">Product</h3>
        <button class="close-btn" id="pdClose" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
      </div>

      <div class="drawer-body">
        <div class="drawer-img"><img id="pdImg" alt="Product image"></div>

        <div class="meta">
          <div><span class="pill" id="pdCat">Category</span></div>
          <div class="muted" id="pdBrandModel">Brand & Model</div>
          <div id="pdOp" class="muted"></div>
          <div id="pdDesc"></div>

          <div class="cta-row">
            <button class="btn" id="pdCopy"><i class="fa-solid fa-link"></i> Copy link</button>
            <button class="btn" id="pdLike"><i class="fa-solid fa-thumbs-up"></i> <span id="pdLikes">0</span></button>
            <a class="btn btn-primary" id="pdWhats" target="_blank" rel="noopener">
              <i class="fa-brands fa-whatsapp"></i> Get Quote on WhatsApp
            </a>
          </div>
        </div>
      </div>

      <div class="tabs">
        <button class="tab active" data-tab="overview">Overview</button>
        <button class="tab" data-tab="specs">Specs</button>
        <button class="tab" data-tab="features">Features</button>
      </div>

      <div class="tabpanes">
        <div class="pane active" id="pane-overview">
          <p id="pdApp" class="muted"></p>
        </div>
        <div class="pane" id="pane-specs">
          <table class="spec-table" id="pdSpec"></table>
        </div>
        <div class="pane" id="pane-features">
          <ul class="feature-list" id="pdFeat"></ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Mobile nav
    const menuToggle=document.querySelector('.menu-toggle'); const navCenter=document.querySelector('.nav-center');
    if(menuToggle&&navCenter){const icon=menuToggle.querySelector('i');menuToggle.addEventListener('click',()=>{navCenter.classList.toggle('open');icon.classList.toggle('fa-xmark',navCenter.classList.contains('open'));icon.classList.toggle('fa-bars',!navCenter.classList.contains('open'));});document.querySelectorAll('.nav-center a').forEach(a=>a.addEventListener('click',()=>{navCenter.classList.remove('open');icon.classList.remove('fa-xmark');icon.classList.add('fa-bars');}));}

    // ===== INLINE PRODUCT DATA (ALL ITEMS) =====
    const PRODUCTS = [
      {"id":"dy-cs3000","brand":"DUKE JIA","model":"DY-CS3000","name":"Computerized Chain Stitch Non-Shuttle Multi-Needle Quilting Machine","category":"quilting","thumbnail":"images/dy-cs3000.png","popularity":"high","views":210,"likes":18,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Quilting","description":"Advanced computerized multi-needle quilting machine with servo-driven control, infrared detection, and high-precision stitching for mattress and textile production.","spec":{"Quilting Width (mm)":2450,"Max Sewing Thickness (mm)":60,"Quilting Speed (rpm)":"500–1000","Space Between Needle Rows (inch)":"5\" (50.8, 76.2, 127), 6\" (76.2, 76.2, 152.4)","Space Between Needles (mm)":"12.7 / 25.4","X-axis Displacement (mm)":308.4,"Stitch Length (mm)":"3–8","Speed of Operation (m/h)":"60–230","Voltage":"AC 380V 50/60Hz","Total Power (kW)":8,"Machine Dimension (mm)":"5400×1650×2050","Machine Weight (kg)":4500},"features":["Advanced computerized control system ensures precision production.","Double rocker mechanism without CAM prevents fabric staining.","Infrared detection automatically stops the machine on thread break.","Servo-driven spindle, needle, saddle, and roller for high-performance control.","Supports 360° quilting freedom with independent step motion.","CAD-based pattern editing with high drawing accuracy.","Automatic zero-return after completion of quilting sets.","Infrared safety sensors enhance operational safety.","Auto-track pattern system with real-time running status detection."],"application":"Widely used for quilting high-quality mattresses, quilt covers, and household ornaments.","tags":["quilting","multi-needle","computerized","chain stitch"]},
      {"id":"dy-pe750x600","brand":"DUKE JIA","model":"DY-PE750X600","name":"Single Head Perforation and Stitching Machine","category":"flagship","thumbnail":"images/Perforation.png","popularity":"medium","views":55,"likes":6,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Perforation and Stitching","description":"High-performance single-head perforation and stitching machine for precise material punching and seam stitching in industrial textile and leather manufacturing.","spec":{"Working Width (mm)":750,"Working Length (mm)":600,"Stitch Type":"Lockstitch with perforation capability","Max Speed (rpm)":1200,"Needle Type":"DPx5 #14–18","Power Supply":"AC 380V 50/60Hz","Air Pressure (MPa)":0.5,"Total Power (kW)":5,"Machine Dimensions (mm)":"2000×1500×1800","Machine Weight (kg)":850},"features":["Integrated perforation and stitching for enhanced productivity.","Precision servo-driven control system for accurate positioning.","Heavy-duty frame for stable operation and reduced vibration.","User-friendly interface with adjustable perforation depth and stitch speed."],"application":"Industrial production of leather goods, automotive upholstery, footwear, and decorative textile components.","tags":["perforation","single head","leather","stitching"]},
      {"id":"dy-pe750x600","brand":"DUKE JIA","model":"DY-PE750X600","name":"Single Head Perforation and Stitching Machine","category":"perforation","thumbnail":"images/Perforation.png","popularity":"medium","views":55,"likes":6,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Perforation and Stitching","description":"High-performance single-head perforation and stitching machine for precise material punching and seam stitching in industrial textile and leather manufacturing.","spec":{"Working Width (mm)":750,"Working Length (mm)":600,"Stitch Type":"Lockstitch with perforation capability","Max Speed (rpm)":1200,"Needle Type":"DPx5 #14–18","Power Supply":"AC 380V 50/60Hz","Air Pressure (MPa)":0.5,"Total Power (kW)":5,"Machine Dimensions (mm)":"2000×1500×1800","Machine Weight (kg)":850},"features":["Integrated perforation and stitching for enhanced productivity.","Precision servo-driven control system for accurate positioning.","Heavy-duty frame for stable operation and reduced vibration.","User-friendly interface with adjustable perforation depth and stitch speed."],"application":"Industrial production of leather goods, automotive upholstery, footwear, and decorative textile components.","tags":["perforation","single head","leather","stitching"]},
      {"id":"dy-sk-d2-2orh","brand":"Jinyuelai","model":"DY-SK-D2-2.0RH","name":"Full Automatic Leather Punching Machine","category":"perforation","thumbnail":"images/dy-sk-d2-2orh.png","popularity":"medium","views":60,"likes":5,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Leather Punching","description":"High-speed multi-axis CNC leather punching machine equipped with servo-driven control, precision punching, and programmable pattern rotation.","spec":{"Working Speed (rpm)":1300,"Max Storage Capacity (MB)":256,"Power (kW)":"2–3","Power Supply":"220V Single-phase","Air Pressure (MPa)":0.6,"Punching Tool No.":"Round hole (0.8/1.0/1.2/1.5/2.0/2.5mm)","Number of Tool Heads":"12 (6 in each group)","Working Area (mm)":"900×600","Machine Size (mm)":"3565×1480×1380","Net Weight (kg)":1200},"features":["Unique multi-axis CNC supports six punch specs simultaneously.","Each punch rotates 360° to create complex patterns from CAD/CorelDRAW.","Servo motor-driven main axis & drive system for stability.","X/Y screw direct drive for high punching precision.","Industrial dust collector for effective dust removal.","Customizable machine & OS per requirements.","Rotatable punch heads enable decorative patterned punching."],"application":"Precision leather processing for footwear, automotive interiors, and decorative leather industries.","tags":["punching","CNC","leather","servo"]},
      {"id":"dy-1201l","brand":"DUKE JIA","model":"DY-1201L","name":"Single Head Embroidery Machine","category":"embroidery","thumbnail":"images/dy-1201l.png","popularity":"high","views":150,"likes":12,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"Versatile single-head embroidery for flat, cap, and finished garments. High-speed with multi-language interface and advanced auto control.","spec":{"Needle Count":12,"Head Count":1,"Max Speed (rpm)":1200,"Embroidery Area (mm)":["400×600","500×800"],"Machine Dimensions (cm)":["127×110×87","146×113×87"],"Net Weight (kg)":[190,245],"Gross Weight (kg)":[207,265],"Memory Capacity (stitches)":"2,000,000 (200 designs)","Cap Frame":"270° wide cap frame","Power Supply":"AC80–260V","Power Output":"DC36 safe","Max Power (W)":150,"Display":"LCD real-time stitching","Color Change Cycles":200,"Auto Features":"Auto thread trim, auto color change","Thread Winding":"Automatic external winding","Languages":"CN/EN/FR/RU/NL/ES/PT/TR/DE/AR/TH/VI","Compatible Devices":"Cording, Sequins, Beads, Rhinestone"},"features":["Flat, cap, and finished garment embroidery.","Auto thread trimming and color change.","270° wide cap frame.","Large memory and real-time LCD preview.","Wide voltage, low power, safe DC output.","Supports cording, sequins, beads, rhinestone."],"application":"Garments, caps, and home textiles for small workshops or pro studios.","tags":["single head","embroidery","cap","flat"]},
      {"id":"dy-1201-compact","brand":"DUKE JIA","model":"DY-1201","name":"Compact Computerized Embroidery Machine","category":"embroidery","thumbnail":"images/dy-1201.png","popularity":"medium","views":120,"likes":10,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"Compact, high-speed machine for caps, T-shirts, and finished garments with a touchscreen interface.","spec":{"Embroidery Area (mm)":"240×320","Needle Count":12,"Color Count":12,"Head Count":1,"Max Speed (rpm)":1200,"Power Supply":"80–260V","Machine Weight (kg)":"34×41 (N.W/G.W)","Touch Screen":"7-inch","Languages":"Multi-language"},"features":["Compact design for home/studios.","Touchscreen control.","Auto trimming & self-lubrication.","Larger base space for many products.","Up to 1000 RPM high precision."],"application":"Home use, small studios, customization for caps, shirts, accessories.","tags":["compact","touchscreen","home use"]},
      {"id":"es-1300","brand":"DUKE JIA","model":"ES-1300","name":"Embroidery Sewing Machine","category":"embroidery","thumbnail":"images/es-1300.png","popularity":"medium","views":95,"likes":8,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery and Sewing","description":"Embroidery sewing machine with auto threading, LCD control, and a wide range of seam/embroidery functions.","spec":{"Function":"67 seam patterns + embroidery","Speed (rpm)":"650 (sewing), 650 (embroidery)","Auto Threading":"Yes","LCD Screen":"Touch-screen","Max Sewing Range (mm)":7,"Optional Presser Foot":"Decorative seams","Memory Capacity (stitches)":2000000,"Max Embroidery Area (mm)":"110×110","Max Needles/min":650,"Pattern Rotation (°)":90,"Pattern Resize":"50%, 100%, 200%","Body Size (mm)":"390×220×300","Packing Size (mm)":"510×375×370","Net/Gross Weight (kg)":"9 / 10","Supported OS":"Win98/2000/XP","Embroidery Format":"TAJIMA compatible","Power Supply":"Single-phase AC"},"features":["67 seam patterns + embroidery.","Auto-threading and trimming.","Touch LCD for easy operation.","Pattern resize & rotation.","USB interface; TAJIMA formats."],"application":"Decorative embroidery & sewing for garments and home textiles.","tags":["sewing+embroidery","LCD","auto threading"]},
      {"id":"halo-100","brand":"DUKE JIA","model":"HALO-100","name":"Single Head Embroidery Machine","category":"embroidery","thumbnail":"images/halo-100.png","popularity":"medium","views":110,"likes":9,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"Compact single-head for caps and finished garments with auto color change, trimming, and lubrication.","spec":{"Embroidery Area (mm)":"240×320","Needle Count":12,"Head Count":1,"Max Speed (rpm)":1000,"Power Supply":"80–260V","Auto Functions":"Color change, trimming, lubrication","Memory Capacity (stitches)":"10,000,000 (100,000 per pattern)","Hoops Included":["Rectangular 32×24 cm","Square 24×24 cm","Round 12 cm","Round 15 cm","Round 20 cm"],"Cap Device":"270° cap station + rings + driver","Languages":"CN/EN/TR/ES/PT/AR/NL/DE/VI/PL/TH/KO/RO/IT/FR/RU","Weights (kg)":"Machine box 35/55; Stand 35/48; Cap device 7.5/8","Sizes (cm)":"Machine 75.5×56.5×74.5; Stand 79×22×79; Cap 50×32×27"},"features":["Auto color change & trimming.","Multiple hoop sizes included.","Stores up to 10M stitches.","Durable stand with wheels.","Optional sock/shoe/pocket/magnet frames."],"application":"Home, mini studios, small workshops for caps, T-shirts, bags.","tags":["single head","cap embroidery","auto trim"]},
      {"id":"dy-601ctm","brand":"DUKE JIA","model":"DY-601CTM","name":"Single Head Chenille & Chainstitch Machine","category":"embroidery","thumbnail":"images/dy-601ctm.png","popularity":"medium","views":85,"likes":7,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Chenille and Chainstitch Embroidery","description":"High-precision chenille & chainstitch with Dahao C29 control and 6-color chenille coiling.","spec":{"Embroidery Area (mm)":"500×800","Computer System":"Dahao C29 (10\" LCD)","Color Support":"6-color chenille device with C19","Working Speed (rpm)":750,"Memory Capacity (stitches)":2000000,"Pattern Storage":"200 patterns","Pattern Input":"USB","Design Format":"DST/DSB/DARUDA/ZSK/Binary/Ternary"},"features":["Dahao C29 10\" LCD for stability & functions.","Six-color chenille coiling or free working.","Auto color change & thread trimming.","Electronic intelligent alarm.","USB input; wide format compatibility."],"application":"Chenille/chainstitch on fashion, home textiles, decorative products.","tags":["chenille","chainstitch","single head"]},
      {"id":"dy606plus6","brand":"DUKE JIA","model":"DY606+6","name":"Multi-Head Mixed Embroidery Machine","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"medium","views":90,"likes":8,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Flat, Double Sequins, Chenille & Chainstitch","description":"Mixed embroidery machine for complex decorative stitching combining flat, chenille, chainstitch, and double sequins.","spec":{"Embroidery Type":"Flat + Double Sequins + Chenille & Chainstitch","Head Count":6,"Needles/Head":"Configurable","Control System":"Computerized","Structure":"Heavy-duty frame","Power Supply":"AC 380V 50/60Hz","Automation":"Auto color change, trimming, positioning"},"features":["Combines multiple techniques in one.","High-speed servo system.","Automatic trimming & color change.","Durable industrial structure."],"application":"Garments, home textiles, fashion accessories, upholstery.","tags":["multi-head","sequins","chenille","chainstitch"]},
      {"id":"dy602plus2","brand":"DUKE JIA","model":"DY602+2","name":"Two-Head Mixed Embroidery Machine","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"medium","views":80,"likes":7,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Flat, Double Sequins, Beads, Coiling & Taping","description":"Versatile two-head for sequins, beads, coiling, and taping.","spec":{"Embroidery Area (mm)":"600×600×850","Needle Count":6,"Head Count":2,"Net Weight (kg)":750,"Machine Dimensions (cm)":"335×213×135","Embroidery Type":"Flat + Double Sequins + Beads + Coiling + Taping","Power Supply":"AC 380V 50/60Hz"},"features":["Multi-technique decorative embroidery.","Dual heads for efficiency.","User-friendly computerized control.","Auto color change & trimming."],"application":"Fashion garments, accessories, home textiles.","tags":["two head","sequins","beads","coiling","taping"]},
      {"id":"dy-606-plus6-rs","brand":"DUKE JIA","model":"DY-606+6","name":"Multi-Head Mixed (Rhinestone/Beads/Coiling/Taping)","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"medium","views":88,"likes":8,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Flat, Rhinestone, Double Beads, Coiling & Taping","description":"Integrates flat, rhinestone, double beads, coiling & taping with dual 6-head configuration.","spec":{"Needle Count":6,"Head Count":"6+6","Embroidery Area (mm)":"660×780×800","Machine Dimensions (cm)":"665×225×165","Control System":"Touch-screen computerized","Power Supply":"AC 380V 50/60Hz","Automation":"Auto trimming, color change, pattern management"},"features":["Rhinestone + beads + coiling + taping in one.","High-precision control, real-time preview.","Heavy-duty construction."],"application":"High-end fashion, bridal, home textiles, designer apparel.","tags":["rhinestone","beads","coiling","taping","multi-head"]},
      {"id":"dy-908","brand":"DUKE JIA","model":"DY-908","name":"9 Needles 8 Heads Tubular Embroidery Machine","category":"embroidery","thumbnail":"images/dy-908.png","popularity":"medium","views":100,"likes":9,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"9-needle, 8-head tubular embroidery for multi-color garments and textiles.","spec":{"Needle Count":9,"Head Count":8,"Net Weight (kg)":1200,"Embroidery Area (mm)":"400×450","Machine Dimensions (cm)":"424×110×140","Structure":"Tubular multi-head","Power Supply":"AC 380V 50/60Hz","Automation":"Auto color change, trimming, thread break detection"},"features":["Multi-color production in one pass.","Stable vibration-free frame.","Pattern editing & memory storage."],"application":"Apparel, customization, home textiles.","tags":["tubular","8 heads","multi-color"]},
      {"id":"dy-912","brand":"DUKE JIA","model":"DY-912","name":"9 Needles 12 Heads Tubular Embroidery Machine","category":"embroidery","thumbnail":"images/dy-912.png","popularity":"medium","views":105,"likes":9,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"Industrial 9-needle, 12-head tubular embroidery for large-scale production.","spec":{"Needle Count":9,"Head Count":12,"Net Weight (kg)":1800,"Embroidery Area (mm)":"400×450","Machine Dimensions (cm)":"584×110×140","Structure":"Multi-head tubular","Power Supply":"AC 380V 50/60Hz","Automation":"Auto trimming, color change, fault detection"},"features":["Mass production with consistent stitch quality.","Pattern memory and advanced control.","Robust, smooth operation."],"application":"Factories & workshops for uniforms and apparel at scale.","tags":["tubular","12 heads","industrial"]},
      {"id":"dy-1201-single","brand":"DUKE JIA","model":"DY-1201","name":"Single Head Embroidery Machine","category":"embroidery","thumbnail":"images/Embroidery.png","popularity":"medium","views":130,"likes":11,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"Versatile single head for flat, cap, and finished garments with advanced automation.","spec":{"Needle Count":12,"Head Count":1,"Max Speed (rpm)":1200,"Embroidery Area (mm)":"350×500","Machine Dimensions (cm)":"113×83×87","Net Weight (kg)":180,"Gross Weight (kg)":197,"Memory (stitches)":"2,000,000 (200 designs)","Cap Frame":"270° wide","Power Supply":"AC80–260V","Power Output":"DC36","Max Power (W)":150,"Display":"LCD real-time","Auto Features":"Auto trim, auto color change, external winding","Color Change Cycles":200,"Compatible Devices":"Cording, Sequins, Beads, Rhinestone","Languages":"CN/EN/FR/RU/NL/ES/PT/TR/DE/AR/TH/VI"},"features":["Flat/cap/finished garment embroidery.","Auto trimming & color change.","Wide voltage & low power."],"application":"Caps, garments, bags, home textiles.","tags":["single head","flat","cap"]},
      {"id":"dy-1201-plus1ct","brand":"DUKE JIA","model":"DY-1201+1CT","name":"12 Needles 1 Head Flat + Chenille & Chainstitch","category":"embroidery","thumbnail":"images/Embroidery.png","popularity":"medium","views":90,"likes":7,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Flat, Chenille and Chainstitch","description":"1+1 series for flat, chenille, and chainstitch with large area and intelligent automation.","spec":{"Needle Count":12,"Head Count":"1+1","Embroidery Area (mm)":"560×1200","Machine Dimensions (cm)":"203×130×160","Net/Gross Weight (kg)":"820 / 840","Max Speed (rpm)":1200,"Memory":"2,000,000 stitches (200 patterns)","Display":"LCD real-time","Design Trace":"Full-screen preview","Power Consumption (W)":150,"Power Supply":"AC 380V 50/60Hz","Auto Features":"Auto trim & color change","Thread Detection":"Break detection","Thread Winding":"Automatic external","Languages":"CN/EN/FR/RU/NL/ES/PT/TR/DE/AR/TH/VI"},"features":["Flat + chenille + chainstitch in one.","High-speed 1200 RPM.","Thread break detection.","Energy-efficient 150W."],"application":"Workshops & factories producing mixed embroidery styles.","tags":["chenille","chainstitch","1+1"]},
      {"id":"dy-1201-plus1pd","brand":"DUKE JIA","model":"DY-1201+1PD","name":"12 Needles 1 Head Flat + Coiling","category":"embroidery","thumbnail":"images/Embroidery.png","popularity":"medium","views":92,"likes":8,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Flat and Coiling","description":"Single-head integrating flat + coiling with power failure recovery and multi-technique compatibility.","spec":{"Needle Count":12,"Head Count":"1+1","Embroidery Area (mm)":"560×1200","Machine Dimensions (cm)":"203×130×160","Net/Gross Weight (kg)":"820 / 840","Max Speed (rpm)":1200,"Memory":"2,000,000 stitches (200 patterns)","Display":"LCD real-time","Design Trace":"Full-screen preview","Power Consumption (W)":150,"Power Recovery":"Power failure recovery","Thread Detection":"Break detection","Thread Winding":"Automatic external","Languages":"CN/EN/FR/RU/NL/ES/PT/TR/DE/AR/TH/VI","Compatible Types":"Flat, Rhinestone, Beads, Coiling, Taping"},"features":["Flat + coiling + (beads/rhinestone/taping) compatible.","Power failure recovery.","1200 RPM with tracing preview.","Thread break detection."],"application":"Garments & decorative textiles with flat + coiling combos.","tags":["coiling","flat","1+1"]},
      {"id":"dy-1201h","brand":"DUKE JIA","model":"DY-1201H","name":"12 Needles 1 Head Special Structure","category":"embroidery","thumbnail":"images/Embroidery.png","popularity":"high","views":155,"likes":12,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"New stable structure, ideal for flat, cap, and finished garments with enhanced automation.","spec":{"Needle Count":12,"Head Count":1,"Max Speed (rpm)":1200,"Embroidery Area (mm)":"500×400","Machine Dimensions (cm)":"95×113.5×160","Net/Gross Weight (kg)":"180 / 210","Memory":"2,000,000 (200 designs)","Cap Frame":"270° wide","Power Supply":"AC80–260V","Power Output":"DC36","Max Power (W)":150,"Display":"LCD real-time","Color Change Cycles":200,"Auto Features":"Auto trim & color change","Thread Winding":"Auto external winding","Languages":"CN/EN/FR/RU/NL/ES/PT/TR/DE/AR/TH/VI","Compatible Devices":"Cording, Sequins, Beads, Rhinestone"},"features":["Improved stability & durability.","Flat/cap/finished embroidery.","Auto trimming & color change.","Wide voltage and safe DC output."],"application":"Caps, garments, home textiles for pro embroidery.","tags":["single head","stable structure","cap"]},
      {"id":"duke-single-head-1201s","brand":"DUKE JIA","model":"DY-1201S","name":"Single Head Embroidery (Touch Control)","category":"embroidery","thumbnail":"images/Embroidery.png","popularity":"medium","views":115,"likes":9,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"Full-color touchscreen, 9 frame visualization modes, network design input, up to 6M stitches.","spec":{"Embroidery Area (mm)":"300×350","Display":"Intelligent full-color touch","Frame Visualization Modes":9,"Network Support":"USB or network","Memory Capacity (stitches)":"6,000,000 (20,000 patterns, 250 color changes)","Special Embroidery":"Sequin, cording, rhinestone","Control Options":"Pad/PC optional","Max Speed (flat/cap rpm)":"1200 / 600","Needle Count":15,"Languages":"20+","Power Input":"AC80–260V","Working Voltage":"36V DC","Safety":"36V low power system"},"features":["Touch UI with sliding/dynamic buttons.","USB + network design input.","Large storage and multi-language.","High speed: 1200rpm flat, 600rpm cap."],"application":"Professional embroidery of caps, garments, decorative items.","tags":["touchscreen","network","storage"]},
      {"id":"dy-1201xl","brand":"DUKE JIA","model":"DY-1201XL","name":"Single Head Embroidery (XL Area)","category":"embroidery","thumbnail":"images/Embroidery.png","popularity":"medium","views":98,"likes":8,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"High-speed single head with 500×1200mm area, auto trimming & color change.","spec":{"Needle Count":12,"Head Count":1,"Embroidery Area (mm)":"500×1200","Machine Dimensions (cm)":"146×113×87","Net/Gross Weight (kg)":"260 / 280","Max Speed (rpm)":1200,"Memory":"2,000,000 (200 designs)","Cap Frame":"270° wide","Display":"LCD real-time","Auto Features":"Auto trim, auto color change, auto start/stop","Thread Winding":"Auto external winding","Languages":"12+","Power Input":"AC80–260V","Power Output":"DC36","Max Power (W)":150,"Compatible Devices":"Cording, Sequins, Beads, Rhinestone"},"features":["XL embroidery area.","Auto start/stop & color change.","Stable wide voltage & low power."],"application":"Garments, caps, home textiles needing large designs.","tags":["XL area","single head","auto color"]},
      {"id": "dy-1202h","brand": "DUKE JIA","model": "DY-1202H","name": "2 Heads Single-Structure Embroidery","category": "embroidery","thumbnail": "images/Multi-Head.png","popularity": "medium","views": 85,"likes": 7,"media": {"youtubeId": "dQw4w9WgXcQ"},"operation": "Embroidery","description": "Compact, stable structure with 2 heads for efficient, high-quality embroidery.","spec": {"Needle Count": 12,"Head Count": 2,"Embroidery Area (mm)": "400×450","Machine Dimensions (cm)": "155×113×150","Net/Gross Weight (kg)": "620 / 700","Max Speed (rpm)": 1200,"Memory": "2,000,000 (200 designs)","Cap Frame": "270° wide","Display": "LCD real-time","Auto Features": "Auto trim, auto color, auto start/stop","Thread Winding": "Auto external winding","Languages": "12+","Power Input": "AC80–260V","Power Output": "DC36","Max Power (W)": 150,"Compatible Devices": "Cording, Sequins, Beads, Rhinestone"},"features": ["Stable and compact structure.","Dual-head embroidery for increased productivity.","Energy-efficient with wide voltage range."],"application": "Commercial embroidery requiring compact size and high precision.","tags": ["2 heads", "stable", "industrial", "compact"]},
      {"id":"dy-1203h","brand":"DUKE JIA","model":"DY-1203H","name":"3 Heads Single-Structure Embroidery","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"medium","views":100,"likes":9,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"New, more stable structure. 3 heads with auto trimming & color change.","spec":{"Needle Count":12,"Head Count":3,"Embroidery Area (mm)":"400×400×450","Machine Dimensions (cm)":"175×113×150","Net/Gross Weight (kg)":"680 / 760","Max Speed (rpm)":1200,"Memory":"2,000,000 (200 designs)","Cap Frame":"270° wide","Display":"LCD real-time","Auto Features":"Auto trim, auto color, auto start/stop","Thread Winding":"Auto external winding","Languages":"12+","Power Input":"AC80–260V","Power Output":"DC36","Max Power (W)":150,"Compatible Devices":"Cording, Sequins, Beads, Rhinestone"},"features":["Stable, durable structure.","3-head productivity.","Low power and wide voltage."],"application":"Commercial embroidery for precision and stability.","tags":["3 heads","stable","industrial"]},
      {"id":"dy-1204","brand":"DUKE JIA","model":"DY-1204","name":"4 Heads Tubular Embroidery Machine","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"medium","views":95,"likes":8,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"12-needle, 4-head tubular embroidery for mid-scale production.","spec":{"Needle Count":12,"Head Count":4,"Embroidery Area (mm)":"400×450","Machine Dimensions (cm)":"264×90×140","Net Weight (kg)":550,"Max Speed (rpm)":1200,"Frame Type":"Tubular","Display":"LCD real-time","Auto Features":"Auto trim & color change","Power Input":"AC80–260V","Power Output":"DC36","Compatible Devices":"Cording, Sequins, Beads, Rhinestone"},"features":["4-head configuration for throughput.","Automatic trimming & color change.","Energy efficient with wide voltage."],"application":"Workshops needing multi-head efficiency.","tags":["4 heads","tubular","throughput"]},
      {"id":"dy-1206","brand":"DUKE JIA","model":"DY-1206","name":"6 Heads Tubular Embroidery Machine","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"medium","views":102,"likes":9,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"12-needle, 6-head tubular embroidery built for industrial scale.","spec":{"Needle Count":12,"Head Count":6,"Embroidery Area (mm)":"400×450","Machine Dimensions (cm)":"343×90×140","Net Weight (kg)":800,"Max Speed (rpm)":1200,"Frame Type":"Tubular","Display":"LCD real-time","Auto Features":"Auto trim & color change","Power Input":"AC80–260V","Power Output":"DC36","Compatible Devices":"Cording, Sequins, Beads, Rhinestone"},"features":["Mass production with 6 heads.","High speed up to 1200 RPM.","Sturdy frame & precise control."],"application":"Garment manufacturers needing high-output precision.","tags":["6 heads","tubular","industrial"]},
      {"id":"dy-1206h","brand":"DUKE JIA","model":"DY-1206H","name":"High-Speed Tubular Embroidery (6 Heads)","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"medium","views":104,"likes":9,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"High-speed 6-head tubular with auto frame switching, power failure recovery, and safety system.","spec":{"Needle Count":"12/15","Head Count":6,"Embroidery Area (mm)":"400×450","Machine Dimensions (cm)":"343×123×132","Net Weight (kg)":1200,"Max Speed (rpm)":1200,"Frame Type":"Tubular + 270° cap frame","Frame Switching":"Auto 180° rotation","Display":"LCD real-time & full-screen preview","Color Change Cycles":200,"Auto Features":"Auto start, color change, trimming","Thread Detection":"Break detection","Power Input":"AC80–260V","Power Output":"DC36V","Safety":"Power failure recovery","Max Power (W)":150,"Compatible Devices":"Cording, Sequins, Beads, Rhinestone"},"features":["Flat/cap/finished embroidery supported.","Quick frame switching with rotation.","Thread break detection; safety recovery."],"application":"Industrial multi-head garments/caps/large textiles.","tags":["6 heads","high-speed","cap frame"]},
      {"id":"dy-1502","brand":"DUKE JIA","model":"DY-1502","name":"Multi-Head Tubular Embroidery (2 Heads)","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"medium","views":99,"likes":8,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"Compact 2-head tubular with auto frame switching, 270° cap frame, and power failure recovery.","spec":{"Needle Count":"12/15","Head Count":2,"Embroidery Area (mm)":"400×450","Machine Dimensions (cm)":"113×85×135","Net Weight (kg)":270,"Max Speed (rpm)":1200,"Frame Type":"Tubular + 270° cap","Frame Switching":"Auto 180° rotation","Display":"LCD real-time & preview","Color Change Cycles":200,"Auto Features":"Auto trim, auto color, auto start/stop","Thread Detection":"Break detection","Power Input":"AC80–260V","Power Output":"DC36V","Compatible Devices":"Cording, Sequins, Beads, Rhinestone"},"features":["Dual-head flexibility.","Power failure recovery.","Wide voltage safe operation."],"application":"Small-scale workshops needing two-head productivity.","tags":["2 heads","compact","cap frame"]},
      {"id":"dy918-120","brand":"DUKE JIA","model":"DY918-120","name":"Multi-Head Automatic High-Speed Embroidery (18 Heads)","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"high","views":160,"likes":14,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"18-head high-speed with A18 computer, all-servo, digital color change, thread manage & cleaning systems.","spec":{"Needle Count":9,"Head Count":18,"Embroidery Area (mm)":"400×800","Machine Dimensions (mm)":"9200×2860×1200","Max Speed (rpm)":1500,"Computer System":"A18","Motor Type":"All Servo","Thread Management":"Trimming & hold","Lubrication":"Auto oil mist","Cleaning":"Auto dust clean","Color Change":"LCD digital","Cam Type":"Double cam head","Frame":"Aluminium dividers; single-piece beam","Additional":"Boring device"},"features":["1500 RPM high-speed.","Servo precision & stability.","Automatic lubrication & dust cleaning."],"application":"Large-scale embroidery manufacturing.","tags":["18 heads","all-servo","high speed"]},
      {"id":"dy915-120","brand":"DUKE JIA","model":"DY915-120","name":"Multi-Head High-Speed Embroidery (15 Heads)","category":"embroidery","thumbnail":"images/Multi-Head.png","popularity":"high","views":150,"likes":13,"media":{"youtubeId":"dQw4w9WgXcQ"},"operation":"Embroidery","description":"High-speed 15-head with A18 computer, all-servo, auto thread trimming, and oil-mist lubrication.","spec":{"Needle Count":9,"Head Count":15,"Embroidery Area (mm)":["400×1200","350×750"],"Machine Dimensions (mm)":"400×800×1200","Max Speed (rpm)":1500,"Computer System":"A18","Motor Type":"All Servo","Thread Management":"Automatic trimming","Lubrication":"Auto oil mist","Cleaning":"Auto dust cleaning","Colors":9,"Power Input":"AC80–260V","Frame":"Heavy-duty structure"},"features":["9-color, 15-head mass production.","All-servo accuracy and energy efficiency.","Auto dust cleaning & lubrication."],"application":"Mass embroidery for garments, uniforms, and home textiles.","tags":["15 heads","all-servo","mass production"]}
    ];
    // ===== /DATA =====

    const gallery=document.getElementById('video-gallery');
    const searchInput=document.getElementById('videoSearch');
    const filterBtns=document.querySelectorAll('.filter-btn');
    const viewBtns=document.querySelectorAll('.view-btn');

    let currentFilter='all', currentSearch='', currentView='grid';

    function renderProducts(){
      let list=PRODUCTS.slice();
      if(currentFilter!=='all') list=list.filter(p=>(p.category||'').toLowerCase()===currentFilter);
      if(currentSearch){
        const q=currentSearch.toLowerCase();
        list=list.filter(p=>(p.brand||'').toLowerCase().includes(q)||(p.model||'').toLowerCase().includes(q)||(p.name||'').toLowerCase().includes(q)||(p.operation||'').toLowerCase().includes(q)||(p.description||'').toLowerCase().includes(q)||((p.tags||[]).join(' ').toLowerCase().includes(q)));
      }
      list.sort((a,b)=>(b.views||0)-(a.views||0));

      gallery.classList.remove('compact','list');
      if(currentView!=='grid') gallery.classList.add(currentView);

      if(!list.length){gallery.innerHTML=`<div style="text-align:center;color:#6b7280;padding:3rem 1rem"><i class="fas fa-box-open" style="font-size:3rem;opacity:.6"></i><h3>No products found</h3></div>`;return;}

      const maxViews=Math.max(...PRODUCTS.map(p=>p.views||0),1);
      gallery.innerHTML='';
      list.forEach((p,i)=>{
        const badge=p.popularity==='high'?'<div class="popularity-badge"><i class="fas fa-fire"></i> Popular</div>':p.popularity==='medium'?'<div class="popularity-badge"><i class="fas fa-star"></i> Trending</div>':'';
        const card=document.createElement('div');
        card.className=`video-card ${currentView==='list'?'list-layout':''}`;
        if(currentView==='grid'){const factor=0.92+((p.views||0)/maxViews)*0.2;card.style.transform=`scale(${factor})`;}
        card.style.animationDelay=`${i*0.05}s`;
        card.innerHTML=`
          <div class="video-thumbnail" data-id="${p.id}">
            <img src="${p.thumbnail||'images/placeholder.png'}" alt="${p.name}">
            ${badge}
          </div>
          <div class="video-info">
            <h3 class="video-title" data-id="${p.id}">${p.name}</h3>
            <p class="video-description"><strong>${p.brand||''} ${p.model||''}</strong> • ${p.operation||''}<br>${p.description||''}</p>
            <div class="video-stats">
              <div><i class="fa-solid fa-eye"></i> ${(p.views||0)} views</div>
              <div class="video-actions">
                <button class="video-action-btn open-details" data-id="${p.id}" title="Details"><i class="fa-solid fa-circle-info"></i></button>
              </div>
            </div>
          </div>`;
        gallery.appendChild(card);
        card.querySelector('.video-thumbnail').addEventListener('click',()=>openDetails(p.id));
        card.querySelector('.video-title').addEventListener('click',()=>openDetails(p.id));
        card.querySelector('.open-details').addEventListener('click',()=>openDetails(p.id));
      });
    }

    searchInput.addEventListener('input',e=>{currentSearch=e.target.value.trim();renderProducts();});
    filterBtns.forEach(btn=>btn.addEventListener('click',()=>{filterBtns.forEach(b=>b.classList.remove('active'));btn.classList.add('active');currentFilter=btn.dataset.filter;renderProducts();}));
    viewBtns.forEach(btn=>btn.addEventListener('click',()=>{currentView=btn.dataset.view;viewBtns.forEach(b=>b.classList.toggle('active',b.dataset.view===currentView));renderProducts();}));

    // ===== Modal (drawer) + Tabs =====
    const m=document.getElementById('productModal');
    const mClose=document.getElementById('pdClose');

    const pdTitle=document.getElementById('pdTitle');
    const pdImg=document.getElementById('pdImg');
    const pdCat=document.getElementById('pdCat');
    const pdBrand=document.getElementById('pdBrandModel');
    const pdOp=document.getElementById('pdOp');
    const pdDesc=document.getElementById('pdDesc');
    const pdLikes=document.getElementById('pdLikes');
    const pdLikeBtn=document.getElementById('pdLike');
    const pdCopy=document.getElementById('pdCopy');
    const pdWhats=document.getElementById('pdWhats');

    const tabButtons=[...document.querySelectorAll('.tab')]; // overview/specs/features
    const panes={
      overview: document.getElementById('pane-overview'),
      specs:    document.getElementById('pane-specs'),
      features: document.getElementById('pane-features')
    };
    const pdSpecTbl=document.getElementById('pdSpec');
    const pdFeatList=document.getElementById('pdFeat');
    const pdApp=document.getElementById('pdApp');

    let currentProduct=null;

    function setTabAvailability(p){
      const hasSpecs = p.spec && Object.keys(p.spec).length>0;
      const hasFeats = Array.isArray(p.features) && p.features.length>0;

      tabButtons.forEach(b=>{
        if(b.dataset.tab==='specs')   b.style.display = hasSpecs ? 'inline-flex' : 'none';
        if(b.dataset.tab==='features')b.style.display = hasFeats ? 'inline-flex' : 'none';
        if(b.dataset.tab==='overview')b.style.display = 'inline-flex';
      });
    }

    function activateTab(name){
      tabButtons.forEach(b=>b.classList.toggle('active', b.dataset.tab===name));
      Object.entries(panes).forEach(([k,el])=>el.classList.toggle('active', k===name));
    }

    tabButtons.forEach(b=>b.addEventListener('click', ()=>activateTab(b.dataset.tab)));

    function openDetails(id){
      const p=PRODUCTS.find(x=>x.id===id); if(!p) return;
      currentProduct=p;

      // Fill basics
      pdTitle.textContent=p.name;
      pdImg.src=p.thumbnail||'images/placeholder.png';
      pdImg.alt=p.name;
      pdCat.textContent=(p.category||'').replace(/^\w/,c=>c.toUpperCase());
      pdBrand.textContent=`${p.brand||''} ${p.model||''}`;
      pdOp.textContent=p.operation||'';
      pdDesc.textContent=p.description||'';
      pdLikes.textContent=p.likes||0;
      pdApp.textContent=p.application?`Application: ${p.application}`:'';

      // Specs
      pdSpecTbl.innerHTML='';
      if(p.spec){
        Object.entries(p.spec).forEach(([k,v])=>{
          const tr=document.createElement('tr');
          tr.innerHTML=`<td class="spec-left">${k}</td><td>${Array.isArray(v)?v.join(', '):v}</td>`;
          pdSpecTbl.appendChild(tr);
        });
      }

      // Features
      pdFeatList.innerHTML='';
      (p.features||[]).forEach(f=>{
        const li=document.createElement('li'); li.textContent=f; pdFeatList.appendChild(li);
      });

      // WhatsApp link
      const wtxt=encodeURIComponent(`Hi Duke Jia Team, I'm interested in ${p.brand||''} ${p.model||''} – ${p.name}. Please share pricing & availability.`);
      pdWhats.href=`https://wa.me/919350513789?text=${wtxt}`;

      // Tabs: set availability then default to Overview
      setTabAvailability(p);
      activateTab('overview');

      // Show drawer
      m.classList.add('active'); document.body.style.overflow='hidden';
      history.replaceState(null,'',`?product=${encodeURIComponent(id)}`);
    }

    function closeDetails(){
      m.classList.remove('active');
      document.body.style.overflow='auto';
      currentProduct=null;
      const url=new URL(location.href); url.searchParams.delete('product'); history.replaceState(null,'',url);
    }

    m.addEventListener('click',e=>{if(e.target===m) closeDetails();});
    mClose.addEventListener('click',closeDetails);
    document.addEventListener('keydown',e=>{if(e.key==='Escape') closeDetails();});

    pdLikeBtn.addEventListener('click',()=>{
      if(!currentProduct) return;
      currentProduct.likes=(currentProduct.likes||0)+1;
      pdLikes.textContent=currentProduct.likes;
      renderProducts();
    });

    pdCopy.addEventListener('click',()=>{
      if(!currentProduct) return;
      const url=`${location.origin}${location.pathname}?product=${encodeURIComponent(currentProduct.id)}`;
      navigator.clipboard.writeText(url).then(()=>{
        pdCopy.innerHTML='<i class="fa-solid fa-check"></i> Copied';
        setTimeout(()=>pdCopy.innerHTML='<i class="fa-solid fa-link"></i> Copy link',1200);
      });
    });

    // Deep-link open
    (function(){
      const id=new URLSearchParams(location.search).get('product');
      if(id && PRODUCTS.some(p=>p.id===id)) openDetails(id);
    })();

    // Initial render
    renderProducts();
  </script>
</body>
</html>
