<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DukeJia Customers – Verified Installs (Privacy-Safe)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<!-- Leaflet (privacy-safe city pins) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
:root{--pur:#045285;--accent:#833ade;--bg:#FAF9F6;--text:#2D3436;--muted:#62707a;--lgray:#E8EDF2}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
a{color:inherit;text-decoration:none}
.container{margin:0 auto;padding:0 40px}
@media(max-width:1024px){.container{padding:0 24px}}
@media(max-width:480px){.container{padding:0 16px}}

.site-header{position:sticky;top:0;z-index:30;background:rgba(250,249,246,.9);backdrop-filter:blur(10px);border-bottom:1px solid var(--lgray)}
.container.nav{display:flex;justify-content:space-between;align-items:center;height:72px}
.nav-center{display:flex;gap:28px;align-items:center}
.nav-center a{font-weight:600}
.nav-center a:hover{color:var(--accent)}
.menu-toggle{display:none;background:none;border:none;color:var(--pur);font-size:1.5rem;cursor:pointer;padding:8px;border-radius:6px}
.btn-quote{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:999px;font-weight:800;background:linear-gradient(90deg,var(--pur),var(--accent));color:#fff}
@media(max-width:780px){
  .nav-center{position:fixed;top:72px;left:0;right:0;background:rgba(250,249,246,.98);backdrop-filter:blur(10px);
    flex-direction:column;padding:20px 24px;gap:0;transform:translateY(-100%);opacity:0;visibility:hidden;transition:.3s;border-bottom:1px solid var(--lgray)}
  .nav-center.open{transform:translateY(0);opacity:1;visibility:visible}
  .nav-center a{padding:16px 0;width:100%;border-bottom:1px solid #eee}
  .menu-toggle{display:block}
  .btn-quote{width:100%;justify-content:center}
}

.hero{padding:48px 0 18px;background:var(--bg);
  background-image:radial-gradient(1100px 520px at 80% -10%, rgba(168,139,255,.18), transparent 60%),
                   radial-gradient(900px 450px at -10% 90%, rgba(4,82,133,.12), transparent 60%);
  background-attachment:fixed}
.headline{font-size:clamp(2.1rem,5vw,3.4rem);line-height:1.05;margin:0 0 .5rem;font-weight:900;color:var(--pur)}
.headline .accent{color:transparent;background:linear-gradient(90deg,var(--pur),var(--accent));-webkit-background-clip:text;background-clip:text}
.sub{font-size:clamp(1rem,1.6vw,1.2rem);line-height:1.8;color:#4a5258;max-width:95ch;margin:0}

.controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:18px}
.control{display:flex;gap:8px;align-items:center}
.input{padding:10px 14px;border:1px solid var(--lgray);border-radius:10px;background:#fff}
.select{padding:10px 12px;border:1px solid var(--lgray);border-radius:10px;background:#fff}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--lgray);border-radius:999px;background:#f1f5fb;color:#425f85;font-weight:800}
.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid var(--lgray);cursor:pointer;background:#fff;font-weight:700}
.btn-primary{background:linear-gradient(90deg,var(--pur),var(--accent));border:none;color:#fff}
.count{font-weight:800;color:#425f85}

.grid{display:grid;grid-template-columns: 380px 1fr;gap:16px;padding:14px 0 60px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.map{height:420px;border:1px solid var(--lgray);border-radius:16px;overflow:hidden;background:#fff}

.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px}
.card{background:#fff;border:1px solid var(--lgray);border-radius:16px;padding:14px;box-shadow:0 8px 20px rgba(0,0,0,.05)}
.card h3{margin:0 0 6px;font-size:1.05rem;font-weight:900}
.kv{display:flex;flex-wrap:wrap;gap:8px;color:#55616a}
.kv span{display:inline-flex;align-items:center;gap:6px}
.meta{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
.meta .left{display:flex;gap:8px;flex-wrap:wrap}
.meta .cta{display:flex;gap:8px}
.muted{color:#70808b}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;opacity:0;z-index:1000}
.modal.active{display:block;opacity:1}
.drawer{position:absolute;right:0;top:0;bottom:0;width:min(680px,100%);background:#fff;border-left:1px solid var(--lgray);
  transform:translateX(100%);transition:transform .28s ease;display:flex;flex-direction:column}
.modal.active .drawer{transform:translateX(0)}
.drawer-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid var(--lgray)}
.close-btn{background:none;border:1px solid var(--lgray);width:36px;height:36px;border-radius:8px;cursor:pointer;color:#6b7280}
.drawer-body{padding:16px;display:flex;flex-direction:column;gap:12px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.pill{padding:6px 10px;border:1px solid var(--lgray);border-radius:999px;background:#f7f9fe;font-weight:800;color:#425f85}
.priv{font-size:.88rem;color:#6b7280}
</style>
</head>
<body>
<header class="site-header">
  <div class="container nav">
    <a class="brand" href="index.html"><img src="images/dukejia.png" width="190" height="55" alt="DUKEJIA" loading="lazy"></a>
    <button class="menu-toggle" aria-label="Toggle navigation"><i class="fa-solid fa-bars"></i></button>
    <nav class="nav-center">
      <a href="index.html">Home</a>
      <a href="Products-Details.html">Products</a>
      <a href="Customers.html" style="color:var(--accent);font-weight:700;">Customers</a>
      <a href="Contact.html">Contact</a>
      <a class="btn-quote" target="_blank" rel="noopener"
         href="https://wa.me/919350513789?text=Hi%20Duke%20Jia%2C%20please%20contact%20me%20about%20your%20machines."><i class="fa-solid fa-phone"></i> Get Quote</a>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="container">
    <h1 class="headline">Verified Installs <span class="accent">Across India</span></h1>
    <p class="sub">We showcase genuine DukeJia installations while protecting our customers’ privacy. City-level pins, no phone numbers, and no exact addresses.</p>
    <div class="controls">
      <input id="q" class="input" placeholder="Search company / city / state…"/>
      <select id="model" class="select"></select>
      <select id="region" class="select">
        <option value="all">All Regions</option>
        <option>NCR</option><option>North</option><option>West</option><option>South</option><option>East</option>
      </select>
      <select id="year" class="select">
        <option value="all">Any Year</option>
        <option>2025</option><option>2024</option><option>2023</option>
      </select>
      <span class="badge"><i class="fa-solid fa-shield-check"></i> Privacy Safe</span>
      <span class="badge"><i class="fa-solid fa-list-check"></i> <span id="count" class="count">0</span> shown</span>
      <button id="export" class="btn"><i class="fa-solid fa-file-export"></i> Export (public view)</button>
    </div>
  </div>
</section>

<section>
  <div class="container grid">
    <div id="map" class="map" aria-label="Installations map"></div>
    <div class="cards" id="cards"></div>
  </div>
</section>

<!-- modal -->
<div id="m" class="modal" aria-hidden="true">
  <div class="drawer" role="dialog" aria-modal="true">
    <div class="drawer-header">
      <h3 id="mdTitle">Installation</h3>
      <button class="close-btn" id="mdClose"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="drawer-body">
      <div class="row">
        <span id="mdModel" class="pill"></span>
        <span id="mdCity" class="pill"></span>
        <span id="mdYear" class="pill"></span>
      </div>
      <div id="mdDesc" class="priv"></div>
      <div class="row">
        <a id="mdWhats" target="_blank" rel="noopener" class="btn btn-primary">
          <i class="fa-brands fa-whatsapp"></i> Request an intro (HCA)
        </a>
        <span class="priv"><i class="fa-solid fa-eye-slash"></i> Contact details are private by default.</span>
      </div>
    </div>
  </div>
</div>

<script>
// mobile nav
const menuToggle=document.querySelector('.menu-toggle'), navCenter=document.querySelector('.nav-center');
if(menuToggle){const icon=menuToggle.querySelector('i');menuToggle.addEventListener('click',()=>{navCenter.classList.toggle('open');icon.classList.toggle('fa-xmark');icon.classList.toggle('fa-bars')});}

// ====== DATA (public, privacy-safe) ======
// Only city-level coords (approx city centres). No phone numbers. No exact addresses.
const PUBLIC = [
 {sl:1, name:"S.P. INTERNATIONAL", city:"Ghaziabad, UP", region:"NCR", model:"DK 1201", year:"2024", coord:[28.6692,77.4538]},
 {sl:2, name:"AAVAD TRADERS", city:"Bhavnagar, Gujarat", region:"West", model:"DK 1201", year:"2024", coord:[21.7645,72.1519]},
 {sl:3, name:"ANAND ENTERPRISES", city:"Mumbai, Maharashtra", region:"West", model:"DK-1201", year:"2024", coord:[19.0760,72.8777]},
 {sl:4, name:"OSWAL POLY RUBBERS", city:"Rewari (Dharuhera), Haryana", region:"North", model:"DK-1201", year:"2023", coord:[28.2043,76.7890]},
 {sl:5, name:"DK THIRTY", city:"Sonipat, Haryana", region:"NCR", model:"DK-1201", year:"2024", coord:[28.9931,77.0151]},
 {sl:6, name:"19 CHARMS", city:"Noida, UP", region:"NCR", model:"DK-1201", year:"2024", coord:[28.5355,77.3910]},
 {sl:7, name:"M S INDUSTRIAL HOUSE", city:"Greater Noida, UP", region:"NCR", model:"Duke Excel Embroidery Machine", year:"2024", coord:[28.4744,77.5030]},
 {sl:8, name:"SRI SIDHI VINAYAK INTERNATIONAL", city:"Gurugram, Haryana", region:"NCR", model:"DUKE DY904-120", year:"2024", coord:[28.4595,77.0266]},
 {sl:9, name:"SRI SIDHI VINAYAK INTERNATIONAL", city:"Gurugram, Haryana", region:"NCR", model:"DUKE DY924-120", year:"2024", coord:[28.4595,77.0266]},
 {sl:10, name:"SRI SIDHI VINAYAK INTERNATIONAL", city:"Gurugram, Haryana", region:"NCR", model:"DUKE (400×500)", year:"2024", coord:[28.4595,77.0266]},
 {sl:11, name:"HK LABELS INDIA PVT LTD", city:"Sonipat (Rai), Haryana", region:"NCR", model:"DY-1201", year:"2024", coord:[28.9931,77.0151]},
 {sl:12, name:"CHEMICO PROCESSING", city:"Noida, UP", region:"NCR", model:"DY-1201", year:"2024", coord:[28.5355,77.3910]},
 {sl:13, name:"Wintage Garments Pvt Ltd", city:"Noida, UP", region:"NCR", model:"DY-1201", year:"2024", coord:[28.5355,77.3910]},
 {sl:14, name:"SUD APPARELS PRIVATE LTD", city:"New Delhi, Delhi", region:"NCR", model:"DY-1201", year:"2023", coord:[28.6139,77.2090]},
 {sl:15, name:"CHOUDHARY ENTERPRISES", city:"Sonipat (Rai), Haryana", region:"NCR", model:"DY-1201", year:"2024", coord:[28.9931,77.0151]},
 {sl:16, name:"SHREE JEE HOME FURNSHING", city:"Ghaziabad, UP", region:"NCR", model:"DY-1201", year:"2024", coord:[28.6692,77.4538]},
 {sl:17, name:"RATHI ENTERPRISES", city:"Delhi (Mangolpuri)", region:"NCR", model:"DY-1201", year:"2023", coord:[28.7041,77.1025]},
 {sl:18, name:"VIJAY SEWING MACHINE", city:"Beed (Wadwani), Maharashtra", region:"West", model:"DY-1201", year:"2024", coord:[18.9891,75.7600]},
];

// ====== ADMIN HOOK (optional) ======
// If you later wire an API, replace fetchAdmin() to call /api/customers with a secret.
// For now, admin just shows all fields from a local JS object merged in (phone/address).
const ADMIN = [
 {sl:1, contact:"Shantanu : 9811344610", address:"GROUND FLOOR, SITE-IV, PLOT NO.20/2/13, Sahibabad, BIS CENTRAL LAB, INDUSTRIAL AREA, GZB"},
 {sl:2, contact:"Mr Mihar Lal Bhai : 9429586386", address:"Trapaj Alang Road, Near Pooja Weigh Bridge"},
 {sl:3, contact:"Mr Sunny : 9619207413", address:"Ashish Industrial Estate, Prabhadevi Rd"},
 {sl:4, contact:"", address:"Dharuhera Industrial Area"},
 {sl:5, contact:"Mr Deepak : 9812801550", address:"Murthal Road, Sonipat"},
 {sl:6, contact:"Mr Ankit : 9999220456", address:"Sector-7, Noida"},
 {sl:7, contact:"Mr Abid : 9899161386", address:"Ecotech II, Greater Noida"},
 {sl:8, contact:"Mr Rajesh Garg : 9891151562", address:"Udyog Vihar, Gurugram"},
 {sl:9, contact:"Mr Rajesh Garg : 9891151562", address:"Udyog Vihar, Gurugram"},
 {sl:10,contact:"Mr Rajesh Garg : 9891151562", address:"Udyog Vihar, Gurugram"},
 {sl:11,contact:"Mr Manoj Tanwar : 9971176417", address:"Rai, Sonipat"},
 {sl:12,contact:"Mr Aryush : 9999881234", address:"Sector-83, Noida"},
 {sl:13,contact:"Mr Harsh : 9871428160", address:"Sector-63, Noida"},
 {sl:14,contact:"Mr Sudhir Diwan : 9811666444", address:"South Extn-II, New Delhi"},
 {sl:15,contact:"Mr Joginder : 9050460841", address:"Rai, Sonipat"},
 {sl:16,contact:"Mr Ankit : 9810222679", address:"Tronica City, Ghaziabad"},
 {sl:17,contact:"Mr Hari Rathi : 9312638586", address:"Mangolpuri Industrial Area"},
 {sl:18,contact:"Mr Gaurav : 8652698321", address:"Wadwani, Beed"}
];

const params = new URLSearchParams(location.search);
const ADMIN_MODE = params.get('admin')==='1' && params.get('key')==='YOUR_SECRET_KEY'; // change key

// merge helper (admin adds private fields locally only when unlocked)
const DATA = PUBLIC.map(p=>{
  if(!ADMIN_MODE) return p;
  const extra = ADMIN.find(x=>x.sl===p.sl) || {};
  return {...p, ...extra};
});

// ====== UI Bits ======
const $ = s => document.querySelector(s);
const cards = $('#cards'), countEl = $('#count');

const modelSel = $('#model');
const uniqueModels = Array.from(new Set(DATA.map(d=>d.model))).sort();
modelSel.innerHTML = `<option value="all">All Models</option>` + uniqueModels.map(m=>`<option>${m}</option>`).join('');

const map = L.map('map',{scrollWheelZoom:false}).setView([22.9,78.5],5);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:18,attribution:'© OpenStreetMap'}).addTo(map);
const markers = [];

// filter state
let q = '', model='all', region='all', year='all';

function matches(d){
  const qok = !q || (d.name+d.city+d.region+d.model).toLowerCase().includes(q);
  const mok = (model==='all'|| d.model===model);
  const rok = (region==='all'|| d.region===region);
  const yok = (year==='all' || d.year===year);
  return qok && mok && rok && yok;
}

function render(){
  // cards
  const view = DATA.filter(matches);
  cards.innerHTML='';
  view.forEach(d=>{
    const c = document.createElement('div'); c.className='card';
    c.innerHTML = `
      <h3>${d.name}</h3>
      <div class="kv">
        <span><i class="fa-solid fa-location-dot"></i> ${d.city}</span>
        <span><i class="fa-solid fa-tag"></i> ${d.model}</span>
        <span><i class="fa-regular fa-calendar"></i> ${d.year}</span>
        <span class="muted"><i class="fa-solid fa-shield-halved"></i> Verified Install</span>
      </div>
      <div class="meta">
        <div class="left">
          <span class="badge">${d.region}</span>
          ${ADMIN_MODE && d.contact ? `<span class="badge"><i class="fa-solid fa-phone"></i> ${d.contact}</span>` : ''}
        </div>
        <div class="cta">
          <button class="btn" data-sl="${d.sl}" data-open="1"><i class="fa-solid fa-circle-info"></i> Details</button>
        </div>
      </div>
    `;
    cards.appendChild(c);
  });
  countEl.textContent = view.length;

  // map pins (clear & redraw)
  markers.forEach(m=>m.remove());
  markers.length=0;
  view.forEach(d=>{
    if(!d.coord) return;
    const m = L.circleMarker(d.coord,{radius:7,weight:1,color:'#4b77be',fillColor:'#6ea3ff',fillOpacity:.7})
      .addTo(map)
      .bindTooltip(`${d.name}<br>${d.city}<br>${d.model} • ${d.year}`,{direction:'top'});
    markers.push(m);
  });
}
render();

// handlers
$('#q').addEventListener('input',e=>{q=e.target.value.trim().toLowerCase();render();});
$('#model').addEventListener('change',e=>{model=e.target.value;render();});
$('#region').addEventListener('change',e=>{region=e.target.value;render();});
$('#year').addEventListener('change',e=>{year=e.target.value;render();});

// modal
const modal = $('#m'), mdClose = $('#mdClose');
const mdTitle=$('#mdTitle'), mdModel=$('#mdModel'), mdCity=$('#mdCity'), mdYear=$('#mdYear'), mdDesc=$('#mdDesc'), mdWhats=$('#mdWhats');

cards.addEventListener('click', (e)=>{
  const btn = e.target.closest('button[data-open]');
  if(!btn) return;
  const sl = Number(btn.dataset.sl);
  const d  = DATA.find(x=>x.sl===sl); if(!d) return;
  mdTitle.textContent = d.name;
  mdModel.textContent = d.model;
  mdCity.textContent = d.city;
  mdYear.textContent = d.year;
  mdDesc.innerHTML = ADMIN_MODE
    ? `<strong>Address:</strong> ${d.address||'—'}<br><strong>Contact:</strong> ${d.contact||'—'}<br><span class="priv">This view is visible only with admin key in the URL.</span>`
    : `Installed in <strong>${d.city}</strong> • Model <strong>${d.model}</strong> • Year <strong>${d.year}</strong><br><br>To protect our customers, we don’t publish phone numbers or exact addresses. Tap below and our team will connect you.`;
  const msg = encodeURIComponent(`Hi DukeJia, please connect me regarding ${d.name} (${d.city}) – model ${d.model}.`);
  mdWhats.href = `https://wa.me/919350513789?text=${msg}`;
  modal.classList.add('active'); document.body.style.overflow='hidden';
});
modal.addEventListener('click',e=>{if(e.target===modal) closeModal();});
mdClose.addEventListener('click',closeModal);
document.addEventListener('keydown',e=>{if(e.key==='Escape') closeModal();});
function closeModal(){modal.classList.remove('active'); document.body.style.overflow='auto';}

// export current public view (no phones/addresses unless ADMIN_MODE)
$('#export').addEventListener('click', ()=>{
  const view = DATA.filter(matches).map(d=>{
    const row = {SL:d.sl, Company:d.name, City:d.city, Region:d.region, Model:d.model, Year:d.year};
    if(ADMIN_MODE){row.Contact=d.contact||''; row.Address=d.address||'';}
    return row;
  });
  const cols = Object.keys(view[0]||{});
  const csv = [cols.join(','), ...view.map(r=>cols.map(k=>`"${String(r[k]??'').replace(/"/g,'""')}"`).join(','))].join('\n');
  const blob = new Blob([csv],{type:'text/csv;charset=utf-8;'}); const url=URL.createObjectURL(blob);
  const a=document.createElement('a'); a.href=url; a.download= ADMIN_MODE? 'dukejia-customers-admin.csv' : 'dukejia-customers-public.csv';
  document.body.appendChild(a); a.click(); a.remove(); setTimeout(()=>URL.revokeObjectURL(url),500);
});
</script>
</body>
</html>
